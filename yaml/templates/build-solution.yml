parameters:
  SolutionFolderPath: ''
  SolutionUniqueName: ''

steps:
- powershell: |
    mkdir $(Pipeline.Workspace)/packed-solution `
    & powershell/solutions/Compress-Solution.ps1
      -SourceFolderPath $env:SOLUTION_FOLDER_PATH `
      -SolutionZipFilePath $(Pipeline.Workspace)/packed-solution/$env:SOLUTION_UNIQUE_NAME.zip `
      -PackageType Both
  name: PackSolution
  env:
    SOLUTION_FOLDER_PATH: ${{ parameters.SolutionFolderPath }}
    SOLUTION_UNIQUE_NAME: ${{ parameters.SolutionUniqueName }}
- publish: $(Pipeline.Workspace)/packed-solution
  artifact: packed-solution